!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("json-schema-ref-parser"),require("jsonpath-plus")):"function"==typeof define&&define.amd?define(["json-schema-ref-parser","jsonpath-plus"],t):(e=e||self).JSONSchemaFaker=t(e.$RefParser,e.jsonpathPlus)}(this,(function(e,t){e=e&&{}.hasOwnProperty.call(e,"default")?e["default"]:e;var r=function(){this.data={}};r.prototype.unregister=function(e){e?delete this.data[e]:this.data={}},r.prototype.register=function(e,t){this.data[e]=t},r.prototype.registerMany=function(e){var t=this;Object.keys(e).forEach((function(r){t.data[r]=e[r]}))},r.prototype.get=function(e){return this.data[e]},r.prototype.list=function(){return this.data};var n={defaultInvalidTypeProduct:null,defaultRandExpMax:10,ignoreProperties:[],ignoreMissingRefs:!1,failOnInvalidTypes:!0,failOnInvalidFormat:!0,alwaysFakeOptionals:!1,optionalsProbability:!1,fixedProbabilities:!1,useExamplesValue:!1,useDefaultValue:!1,requiredOnly:!1,minItems:0,maxItems:null,minLength:0,maxLength:null,resolveJsonPath:!1,reuseProperties:!1,fillProperties:!0,replaceEmptyByRandomValue:!1};n.random=Math.random;var i=new(function(e){function t(){e.call(this),this.data=Object.assign({},n),this._defaults=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={defaults:{configurable:!0}};return r.defaults.get=function(){return Object.assign({},this._defaults)},Object.defineProperties(t.prototype,r),t}(r));function a(e,t){return"string"==typeof e?void 0!==t?i.register(e,t):i.get(e):i.registerMany(e)}a.getDefaults=function(){return i.defaults};var o=["integer","number","string","boolean","null"],s={SCALAR_TYPES:o,ALL_TYPES:["array","object"].concat(o),MIN_NUMBER:-100,MAX_NUMBER:100,MIN_INTEGER:-1e8,MAX_INTEGER:1e8,MOST_NEAR_DATETIME:2524608e6};var u={ROOT:0,GROUP:1,POSITION:2,SET:3,RANGE:4,REPETITION:5,REFERENCE:6,CHAR:7};const f=()=>[{type:u.RANGE,from:48,to:57}],l=()=>[{type:u.CHAR,value:95},{type:u.RANGE,from:97,to:122},{type:u.RANGE,from:65,to:90}].concat(f()),c=()=>[{type:u.CHAR,value:9},{type:u.CHAR,value:10},{type:u.CHAR,value:11},{type:u.CHAR,value:12},{type:u.CHAR,value:13},{type:u.CHAR,value:32},{type:u.CHAR,value:160},{type:u.CHAR,value:5760},{type:u.RANGE,from:8192,to:8202},{type:u.CHAR,value:8232},{type:u.CHAR,value:8233},{type:u.CHAR,value:8239},{type:u.CHAR,value:8287},{type:u.CHAR,value:12288},{type:u.CHAR,value:65279}],h=()=>[{type:u.CHAR,value:10},{type:u.CHAR,value:13},{type:u.CHAR,value:8232},{type:u.CHAR,value:8233}];var p=()=>({type:u.SET,set:l(),not:!1}),m=()=>({type:u.SET,set:l(),not:!0}),d=()=>({type:u.SET,set:f(),not:!1}),g=()=>({type:u.SET,set:f(),not:!0}),y=()=>({type:u.SET,set:c(),not:!1}),v=()=>({type:u.SET,set:c(),not:!0}),x=()=>({type:u.SET,set:h(),not:!0}),b=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){const r={0:0,t:9,n:10,v:11,f:12,r:13};t.strToChars=function(e){return e=e.replace(/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|(0?[0-7]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g,(function(e,t,n,i,a,o,s,u){if(n)return e;var f=t?8:i?parseInt(i,16):a?parseInt(a,16):o?parseInt(o,8):s?"@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?".indexOf(s):r[u],l=String.fromCharCode(f);return/[[\]{}^$.|?*+()]/.test(l)&&(l="\\"+l),l}))},t.tokenizeClass=(e,r)=>{for(var n,i,a=[],o=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(?:\\)?([^\]]))|(\])|(?:\\)?([^])/g;null!=(n=o.exec(e));)if(n[1])a.push(p());else if(n[2])a.push(d());else if(n[3])a.push(y());else if(n[4])a.push(m());else if(n[5])a.push(g());else if(n[6])a.push(v());else if(n[7])a.push({type:u.RANGE,from:(n[8]||n[9]).charCodeAt(0),to:n[10].charCodeAt(0)});else{if(!(i=n[12]))return[a,o.lastIndex];a.push({type:u.CHAR,value:i.charCodeAt(0)})}t.error(r,"Unterminated character class")},t.error=(e,t)=>{throw new SyntaxError("Invalid regular expression: /"+e+"/: "+t)}})),O=(b.strToChars,b.tokenizeClass,b.error,()=>({type:u.POSITION,value:"b"})),E=()=>({type:u.POSITION,value:"B"}),w=()=>({type:u.POSITION,value:"^"}),A=()=>({type:u.POSITION,value:"$"}),I=e=>{var t,r,n=0,i={type:u.ROOT,stack:[]},a=i,o=i.stack,s=[],f=t=>{b.error(e,`Nothing to repeat at column ${t-1}`)},l=b.strToChars(e);for(t=l.length;n<t;)switch(r=l[n++]){case"\\":switch(r=l[n++]){case"b":o.push(O());break;case"B":o.push(E());break;case"w":o.push(p());break;case"W":o.push(m());break;case"d":o.push(d());break;case"D":o.push(g());break;case"s":o.push(y());break;case"S":o.push(v());break;default:/\d/.test(r)?o.push({type:u.REFERENCE,value:parseInt(r,10)}):o.push({type:u.CHAR,value:r.charCodeAt(0)})}break;case"^":o.push(w());break;case"$":o.push(A());break;case"[":var c;"^"===l[n]?(c=!0,n++):c=!1;var h=b.tokenizeClass(l.slice(n),e);n+=h[1],o.push({type:u.SET,set:h[0],not:c});break;case".":o.push(x());break;case"(":var I={type:u.GROUP,stack:[],remember:!0};"?"===(r=l[n])&&(r=l[n+1],n+=2,"="===r?I.followedBy=!0:"!"===r?I.notFollowedBy=!0:":"!==r&&b.error(e,`Invalid group, character '${r}'`+` after '?' at column ${n-1}`),I.remember=!1),o.push(I),s.push(a),a=I,o=I.stack;break;case")":0===s.length&&b.error(e,`Unmatched ) at column ${n-1}`),o=(a=s.pop()).options?a.options[a.options.length-1]:a.stack;break;case"|":a.options||(a.options=[a.stack],delete a.stack);var k=[];a.options.push(k),o=k;break;case"{":var R,M,P=/^(\d+)(,(\d+)?)?\}/.exec(l.slice(n));null!==P?(0===o.length&&f(n),R=parseInt(P[1],10),M=P[2]?P[3]?parseInt(P[3],10):Infinity:R,n+=P[0].length,o.push({type:u.REPETITION,min:R,max:M,value:o.pop()})):o.push({type:u.CHAR,value:123});break;case"?":0===o.length&&f(n),o.push({type:u.REPETITION,min:0,max:1,value:o.pop()});break;case"+":0===o.length&&f(n),o.push({type:u.REPETITION,min:1,max:Infinity,value:o.pop()});break;case"*":0===o.length&&f(n),o.push({type:u.REPETITION,min:0,max:Infinity,value:o.pop()});break;default:o.push({type:u.CHAR,value:r.charCodeAt(0)})}return 0!==s.length&&b.error(e,"Unterminated group"),i};class k{constructor(e,t){this.low=e,this.high=t,this.length=1+t-e}overlaps(e){return!(this.high<e.low||this.low>e.high)}touches(e){return!(this.high+1<e.low||this.low-1>e.high)}add(e){return new k(Math.min(this.low,e.low),Math.max(this.high,e.high))}subtract(e){return e.low<=this.low&&e.high>=this.high?[]:e.low>this.low&&e.high<this.high?[new k(this.low,e.low-1),new k(e.high+1,this.high)]:e.low<=this.low?[new k(e.high+1,this.high)]:[new k(this.low,e.low-1)]}toString(){return this.low==this.high?this.low.toString():this.low+"-"+this.high}}class R{constructor(e,t){this.ranges=[],this.length=0,null!=e&&this.add(e,t)}_update_length(){this.length=this.ranges.reduce((e,t)=>e+t.length,0)}add(e,t){var r=e=>{for(var t=0;t<this.ranges.length&&!e.touches(this.ranges[t]);)t++;for(var r=this.ranges.slice(0,t);t<this.ranges.length&&e.touches(this.ranges[t]);)e=e.add(this.ranges[t]),t++;r.push(e),this.ranges=r.concat(this.ranges.slice(t)),this._update_length()};return e instanceof R?e.ranges.forEach(r):(null==t&&(t=e),r(new k(e,t))),this}subtract(e,t){var r=e=>{for(var t=0;t<this.ranges.length&&!e.overlaps(this.ranges[t]);)t++;for(var r=this.ranges.slice(0,t);t<this.ranges.length&&e.overlaps(this.ranges[t]);)r=r.concat(this.ranges[t].subtract(e)),t++;this.ranges=r.concat(this.ranges.slice(t)),this._update_length()};return e instanceof R?e.ranges.forEach(r):(null==t&&(t=e),r(new k(e,t))),this}intersect(e,t){var r=[],n=e=>{for(var t=0;t<this.ranges.length&&!e.overlaps(this.ranges[t]);)t++;for(;t<this.ranges.length&&e.overlaps(this.ranges[t]);){var n=Math.max(this.ranges[t].low,e.low),i=Math.min(this.ranges[t].high,e.high);r.push(new k(n,i)),t++}};return e instanceof R?e.ranges.forEach(n):(null==t&&(t=e),n(new k(e,t))),this.ranges=r,this._update_length(),this}index(e){for(var t=0;t<this.ranges.length&&this.ranges[t].length<=e;)e-=this.ranges[t].length,t++;return this.ranges[t].low+e}toString(){return"[ "+this.ranges.join(", ")+" ]"}clone(){return new R(this)}numbers(){return this.ranges.reduce((e,t)=>{for(var r=t.low;r<=t.high;)e.push(r),r++;return e},[])}subranges(){return this.ranges.map(e=>({low:e.low,high:e.high,length:1+e.high-e.low}))}}var M=R;const P=I.types=u;var _=class e{constructor(e,t){if(this._setDefaults(e),e instanceof RegExp)this.ignoreCase=e.ignoreCase,this.multiline=e.multiline,e=e.source;else{if("string"!=typeof e)throw new Error("Expected a regexp or string");this.ignoreCase=t&&-1!==t.indexOf("i"),this.multiline=t&&-1!==t.indexOf("m")}this.tokens=I(e)}_setDefaults(t){this.max=null!=t.max?t.max:null!=e.prototype.max?e.prototype.max:100,this.defaultRange=t.defaultRange?t.defaultRange:this.defaultRange.clone(),t.randInt&&(this.randInt=t.randInt)}gen(){return this._gen(this.tokens,[])}_gen(e,t){var r,n,i,a,o;switch(e.type){case P.ROOT:case P.GROUP:if(e.followedBy||e.notFollowedBy)return"";for(e.remember&&e.groupNumber===undefined&&(e.groupNumber=t.push(null)-1),n="",a=0,o=(r=e.options?this._randSelect(e.options):e.stack).length;a<o;a++)n+=this._gen(r[a],t);return e.remember&&(t[e.groupNumber]=n),n;case P.POSITION:return"";case P.SET:var s=this._expand(e);return s.length?String.fromCharCode(this._randSelect(s)):"";case P.REPETITION:for(i=this.randInt(e.min,e.max===Infinity?e.min+this.max:e.max),n="",a=0;a<i;a++)n+=this._gen(e.value,t);return n;case P.REFERENCE:return t[e.value-1]||"";case P.CHAR:var u=this.ignoreCase&&this._randBool()?this._toOtherCase(e.value):e.value;return String.fromCharCode(u)}}_toOtherCase(e){return e+(97<=e&&e<=122?-32:65<=e&&e<=90?32:0)}_randBool(){return!this.randInt(0,1)}_randSelect(e){return e instanceof M?e.index(this.randInt(0,e.length-1)):e[this.randInt(0,e.length-1)]}_expand(e){if(e.type===I.types.CHAR)return new M(e.value);if(e.type===I.types.RANGE)return new M(e.from,e.to);{let t=new M;for(let r=0;r<e.set.length;r++){let n=this._expand(e.set[r]);if(t.add(n),this.ignoreCase)for(let e=0;e<n.length;e++){let r=n.index(e),i=this._toOtherCase(r);r!==i&&t.add(i)}}return e.not?this.defaultRange.clone().subtract(t):this.defaultRange.clone().intersect(t)}}randInt(e,t){return e+Math.floor(Math.random()*(1+t-e))}get defaultRange(){return this._range=this._range||new M(32,126)}set defaultRange(e){this._range=e}static randexp(t,r){var n;return"string"==typeof t&&(t=new RegExp(t,r)),t._randexp===undefined?(n=new e(t,r),t._randexp=n):(n=t._randexp)._setDefaults(t),n.gen()}static sugar(){RegExp.prototype.gen=function(){return e.randexp(this)}}};function j(e,t,r,n,i){return void 0===i&&(i=!1),r=void 0===r?s.MIN_NUMBER:r,n=void 0===n?s.MAX_NUMBER:n,(t=void 0===t?n:t)<(e=void 0===e?r:e)&&(t+=e),i?function(e,t){return a("random")()*(t-e)+e}(e,t):function(e,t){return e=void 0===e?s.MIN_INTEGER:e,t=void 0===t?s.MAX_INTEGER:t,Math.floor(a("random")()*(t-e+1))+e}(e,t)}var S={pick:function(e){return e[Math.floor(a("random")()*e.length)]},date:function(e){if(e)return function(e){switch(e){case"seconds":return 60*j(0,60);case"minutes":return 612*j(15,50);case"hours":return 36123*j(12,72);case"days":return 86412345*j(7,30);case"weeks":return 604812345*j(4,52);case"months":return 2592012345*j(2,13);case"years":return 31104012345*j(1,20)}}(e);var t=new Date,r=j(-1e3,s.MOST_NEAR_DATETIME);return t.setTime(t.getTime()-r),t},shuffle:function(e){for(var t,r,n=e.length,i=e.slice();n>0;)r=Math.floor(a("random")()*n),t=i[n-=1],i[n]=i[r],i[r]=t;return i},number:j,randexp:function(e){return _.prototype.max=a("defaultRandExpMax"),_.prototype.randInt=function(e,t){return e+Math.floor(a("random")()*(t-e+1))},new _(e).gen()}};function T(e,t){return Object.keys(t).forEach((function(r){"object"!=typeof t[r]||null===t[r]?e[r]=t[r]:Array.isArray(t[r])?(e[r]=e[r]||[],t[r].forEach((function(t){Array.isArray(e[r])&&-1===e[r].indexOf(t)&&e[r].push(t)}))):"object"!=typeof e[r]||null===e[r]||Array.isArray(e[r])?e[r]=T({},t[r]):e[r]=T(e[r],t[r])})),e}function N(){return S.pick([!1,!0,null,-1,NaN,Math.PI,Infinity,undefined,[],{},Math.random(),Math.random().toString(36).substr(2)])}var C={getSubAttribute:function(e,t){for(var r=t.split(".");r.length;){var n=r.shift();if(!e[n])break;e=e[n]}return e},hasProperties:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return t.filter((function(t){return"undefined"!=typeof e[t]})).length>0},omitProps:function(e,t){var r={};return Object.keys(e).forEach((function(n){-1===t.indexOf(n)&&(Array.isArray(e[n])?r[n]=e[n].slice():r[n]=e[n]instanceof Object?T({},e[n]):e[n])})),r},typecast:function(e,t,r){var n={};switch(e||t.type){case"integer":case"number":if("undefined"!=typeof t.minimum&&(n.minimum=t.minimum),"undefined"!=typeof t.maximum&&(n.maximum=t.maximum),t["enum"]){var i=Math.max(n.minimum||0,0),o=Math.min(n.maximum||Infinity,Infinity);t.exclusiveMinimum&&i===t.minimum&&(i+=t.multipleOf||1),t.exclusiveMaximum&&o===t.maximum&&(o-=t.multipleOf||1),(i||o!==Infinity)&&(t["enum"]=t["enum"].filter((function(e){return e>=i&&e<=o})))}break;case"string":n.minLength=a("minLength")||0,n.maxLength=a("maxLength")||Number.MAX_SAFE_INTEGER,"undefined"!=typeof t.minLength&&(n.minLength=Math.max(n.minLength,t.minLength)),"undefined"!=typeof t.maxLength&&(n.maxLength=Math.min(n.maxLength,t.maxLength))}var s=r(n);if(null===s||s===undefined)return null;switch(e||t.type){case"number":s=parseFloat(s);break;case"integer":s=parseInt(s,10);break;case"boolean":s=!!s;break;case"string":s=String(s);for(var u,f=Math.max(n.minLength||0,0),l=Math.min(n.maxLength||Infinity,Infinity);s.length<f&&(u=s,t.pattern?s+=S.randexp(t.pattern):s+=""+S.pick([" ","/","_","-","+","=","@","^"])+s,s!==u););switch(s.length>l&&(s=s.substr(0,l)),t.format){case"date-time":case"datetime":s=new Date(s).toISOString().replace(/([0-9])0+Z$/,"$1Z");break;case"date":s=new Date(s).toISOString().substr(0,10);break;case"time":s=new Date("1969-01-01 "+s).toISOString().substr(11)}}return s},merge:T,clone:function he(e,t){if(void 0===t&&(t=new Map),!e||"object"!=typeof e)return e;if(t.has(e))return t.get(e);if(Array.isArray(e)){var r=[];return t.set(e,r),r.push.apply(r,e.map((function(e){return he(e,t)}))),r}var n={};return t.set(e,n),Object.keys(e).reduce((function(r,n){return r[n]=he(e[n],t),r}),n)},short:function(e){var t=JSON.stringify(e),r=JSON.stringify(e,null,2);return t.length>400?r.substr(0,400)+"...":r},notValue:function(e,t){var r=T({},t);if("undefined"!=typeof e.minimum&&(r.maximum=e.minimum,r.exclusiveMaximum=!0),"undefined"!=typeof e.maximum&&(r.minimum=e.maximum>r.maximum?0:e.maximum,r.exclusiveMinimum=!0),"undefined"!=typeof e.minLength&&(r.maxLength=e.minLength),"undefined"!=typeof e.maxLength&&(r.minLength=e.maxLength>r.maxLength?0:e.maxLength),e.type)r.type=S.pick(s.SCALAR_TYPES.filter((function(t){return(Array.isArray(e.type)?e.type:[e.type]).every((function(e){return"number"===t||"integer"===t?"number"!==e&&"integer"!==e:t!==e}))})));else if(e["enum"]){var n;do{n=N()}while(-1!==e["enum"].indexOf(n));r["enum"]=[n]}return e.required&&r.properties&&e.required.forEach((function(e){delete r.properties[e]})),r},anyValue:N,validate:function(e,t){return!t.every((function(t){return"undefined"!=typeof t.minimum&&e>=t.minimum||"undefined"!=typeof t.maximum&&e<=t.maximum}))},isKey:function(e){return-1!==["enum","const","default","examples","required","definitions"].indexOf(e)},template:function pe(e,t){return Array.isArray(e)?e.map((function(e){return pe(e,t)})):("string"==typeof e&&(e=e.replace(/#\{([\w.-]+)\}/g,(function(e,r){return t[r]}))),e)}};var L=function(){this.registry={},this.support={}};L.prototype.reset=function(e){e?(delete this.registry[e],delete this.support[e]):(this.registry={},this.support={})},L.prototype.extend=function(e,t){var r,n=this;this.registry[e]=t(this.registry[e]),this.support[e]||(this.support[e]=(r=function(){return n.registry[e]},function(e,t,n,i){var a=e,o=[];"object"==typeof e&&(a=Object.keys(e)[0],Array.isArray(e[a])?o=e[a]:o.push(e[a]));for(var s=a.split("."),u=r();s.length>1;)u=u[s.shift()];return"function"==typeof(e="object"==typeof u?u[s[0]]:u)&&(e=e.apply(u,o.map((function(e){return C.template(e,i)})))),"[object Object]"==={}.toString.call(e)&&Object.keys(e).forEach((function(t){if("function"==typeof e[t])throw new Error("Cannot resolve value for '"+n+": "+a+"', given: "+e)})),e}))},L.prototype.define=function(e,t){this.support[e]=t},L.prototype.get=function(e){if("undefined"==typeof this.registry[e])throw new ReferenceError("'"+e+"' dependency doesn't exist.");return this.registry[e]},L.prototype.wrap=function(e){for(var t=this,r=Object.keys(e),n={},i=r.length,a=function(){var a=r[i].replace(/^x-/,""),o=t.support[a];if("function"==typeof o)return Object.defineProperty(e,"generate",{configurable:!1,enumerable:!1,writable:!1,value:function(t){return o.call(n,e[r[i]],e,r[i],t)}}),"break"};i--;){if("break"===a())break}return e};var $=new r;function H(e,t){if(void 0===e)return $.list();if("string"==typeof e)if("function"==typeof t)$.register(e,t);else{if(null!==t&&!1!==t)return $.get(e);$.unregister(e)}else $.registerMany(e)}var q=function(e){function t(t,r){e.call(this),e.captureStackTrace&&e.captureStackTrace(this,this.constructor),this.name="ParseError",this.message=t,this.path=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),D={array:["additionalItems","items","maxItems","minItems","uniqueItems"],integer:["exclusiveMaximum","exclusiveMinimum","maximum","minimum","multipleOf"],object:["additionalProperties","dependencies","maxProperties","minProperties","patternProperties","properties","required"],string:["maxLength","minLength","pattern","format"]};D.number=D.integer;var F=["additionalItems","items","additionalProperties","dependencies","patternProperties","properties"];function G(e,t,r){return Object.keys(e).filter((function(e){var n=F.indexOf(t)>-1;return!(!(r.indexOf(e)>-1)||n)})).length>0}var z=function(){return a("random")()>.5};var B=function(){return null};function U(e){var t="undefined"==typeof e.minimum?s.MIN_INTEGER:e.minimum,r="undefined"==typeof e.maximum?s.MAX_INTEGER:e.maximum,n=e.multipleOf;if(n&&(r=Math.floor(r/n)*n,t=Math.ceil(t/n)*n),e.exclusiveMinimum&&t===e.minimum&&(t+=n||1),e.exclusiveMaximum&&r===e.maximum&&(r-=n||1),t>r)return NaN;if(n){if(-1===String(n).indexOf(".")){for(var i=S.number(Math.floor(t/n),Math.floor(r/n))*n;i<t;)i+=e.multipleOf;return i}var a,o,u=(r-t)/n;do{o=(a=S.number(0,u)*n)/n%1}while(0!==o);return t+a}return S.number(t,r,undefined,undefined,!0)}var Z="Lorem ipsum dolor sit amet consectetur adipisicing elit sed do eiusmod tempor incididunt ut labore\net dolore magna aliqua Ut enim ad minim veniam quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea\ncommodo consequat Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla\npariatur Excepteur sint occaecat cupidatat non proident sunt in culpa qui officia deserunt mollit anim id est\nlaborum".split(/\W/);function V(e){return S.shuffle(Z).slice(0,e)}var J={type:["string","number","integer","boolean"]};function X(){return V(S.number(1,5)).join(" ")}function W(e,t){void 0===e&&(e=0),void 0===t&&(t=140);for(var r=Math.max(0,e),n=S.number(r,t),i=X();i.length<r;)i+=X();return i.length>n&&(i=i.substr(0,n)),i}function Y(){return S.date().toISOString()}var K="https?://{hostname}(?:[a-zA-Z][a-zA-Z0-9+-.]*)+",Q={email:"[a-zA-Z\\d][a-zA-Z\\d-]{1,13}[a-zA-Z\\d]@{hostname}",hostname:"[a-zA-Z]{1,33}\\.[a-z]{2,4}",ipv6:"[a-f\\d]{4}(:[a-f\\d]{4}){7}",uri:K,slug:"[a-zA-Z\\d_-]+","uri-reference":K+"(?:\\?([a-z]{1,7}(=\\w{1,5})?&){0,3})?","uri-template":K.replace("(?:","(?:/\\{[a-z][:a-zA-Z0-9-]*\\}|"),"json-pointer":"(/(?:"+"[a-zA-Z][a-zA-Z0-9+-.]*".replace("]*","/]*")+"|~[01]))+",uuid:"^[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$"};Q.iri=Q["uri-reference"],Q["iri-reference"]=Q["uri-reference"],Q["idn-email"]=Q.email,Q["idn-hostname"]=Q.hostname;var ee=new RegExp("\\{("+Object.keys(Q).join("|")+")\\}");function te(e,t){var r,n=H(e.format);if("function"==typeof n)return n(e);switch(e.format){case"date-time":case"datetime":return Y();case"date":return Y().slice(0,10);case"time":return Y().slice(11);case"ipv4":return[0,0,0,0].map((function(){return S.number(0,255)})).join(".");case"regex":return".+?";case"email":case"hostname":case"ipv6":case"uri":case"uri-reference":case"iri":case"iri-reference":case"idn-email":case"idn-hostname":case"json-pointer":case"slug":case"uri-template":case"uuid":return r=e.format,S.randexp(Q[r]).replace(ee,(function(e,t){return S.randexp(Q[t])}));default:if(void 0===n){if(a("failOnInvalidFormat"))throw new Error("unknown registry key "+C.short(e.format));return t()}throw new Error("unsupported format '"+e.format+"'")}}var re={boolean:z,"null":B,array:function(e,t,r,n){var i=[];if(!e.items&&!e.additionalItems){if(C.hasProperties(e,"minItems","maxItems","uniqueItems"))throw new q("missing items for "+C.short(e),t);return i}if(Array.isArray(e.items))return e.items.map((function(e,i){var a=t.concat(["items",i]);return n(e,a,r)}));var o=e.minItems,s=e.maxItems;a("minItems")&&(o=s?Math.min(a("minItems"),s):a("minItems")),a("maxItems")&&((s=o?Math.min(a("maxItems"),o):a("maxItems"))&&s>a("maxItems")&&(s=a("maxItems")),o&&o>a("maxItems")&&(o=s));var u=!0===a("alwaysFakeOptionals")?1:a("optionalsProbability"),f=a("alwaysFakeOptionals")||a("fixedProbabilities")||!1,l=S.number(o,s,1,5);!1!==u&&(l=Math.max(f?Math.round((s||l)*u):Math.abs(S.number(o,s)*u),o||0));for(var c="object"==typeof e.additionalItems?e.additionalItems:{},h=i.length;h<l;h+=1){var p=t.concat(["items",h]),m=n(e.items||c,p,r);i.push(m)}return e.uniqueItems?function(e,t,r,n,i,a){var o=[],s=[];function u(e){var t=JSON.stringify(e);return-1===s.indexOf(t)&&(s.push(t),o.push(e),!0)}t.forEach(u);for(var f=100;o.length!==t.length&&(u(a(r.items||n,e,i))||(f-=1),f););return o}(t.concat(["items"]),i,e,c,r,n):i},integer:function(e){return U(Object.assign({multipleOf:1},e))},number:U,object:function(e,t,r,n){var i={},o=e.properties||{},s=e.patternProperties||{},u="boolean"==typeof e.required?[]:(e.required||[]).slice(),f=!1!==e.additionalProperties,l=Object.keys(o),c=Object.keys(s),h=l.concat(c).reduce((function(e,t){return-1===u.indexOf(t)&&e.push(t),e}),[]),p=u.concat(h),m=f&&!0===e.additionalProperties?J:e.additionalProperties;if(!f&&0===l.length&&0===c.length&&C.hasProperties(e,"minProperties","maxProperties","dependencies","required"))return null;if(!0===a("requiredOnly"))return u.forEach((function(e){o[e]&&(i[e]=o[e])})),n(i,t.concat(["properties"]),r,e);var d=!0===a("alwaysFakeOptionals")?1:a("optionalsProbability"),g=a("alwaysFakeOptionals")||a("fixedProbabilities")||!1,y=a("ignoreProperties")||[],v=Math.max(e.minProperties||0,u.length),x=e.maxProperties||p.length+(f?S.number(1,5):0),b=Math.max(0,p.length-v);1!==p.length||u.length||(b=S.number(b,p.length+(p.length-v))),!1!==d&&(b=!0===g?Math.round(v-u.length+d*(p.length-v)):S.number(v-u.length,d*(p.length-v)));var O=S.shuffle(h).slice(0,b),E=h.filter((function(e){return-1!==O.indexOf(e)})),w=!1!==d?x:S.number(0,x),A=u.concat(E.slice(0,w)),I=[];if(e.dependencies&&(Object.keys(e.dependencies).forEach((function(t){var r=e.dependencies[t];-1!==A.indexOf(t)&&(Array.isArray(r)?r.forEach((function(e){-1===A.indexOf(e)&&A.push(e)})):I.push(r))})),I.length))return delete e.dependencies,n({allOf:I.concat(e)},t.concat(["properties"]),r,e);var k=[];A.forEach((function(e){for(var t=0;t<y.length;t+=1)if(y[t]instanceof RegExp&&y[t].test(e)||"string"==typeof y[t]&&y[t]===e||"function"==typeof y[t]&&y[t](o[e],e))return void k.push(e);var r;if(!1===m&&-1!==u.indexOf(e)&&(i[e]=o[e]),o[e]&&(i[e]=o[e]),c.forEach((function(t){e.match(new RegExp(t))&&(r=!0,i[e]?C.merge(i[e],s[t]):i[S.randexp(e)]=s[t])})),!r){var n=s[e]||m;n&&!1!==m&&(i[s[e]?S.randexp(e):e]=o[e]||n)}}));var R,M=a("fillProperties"),P=a("reuseProperties"),_=Object.keys(i).length+(M?0:k.length);function j(e){var t;do{if(!e.length)break;t=e.shift()}while(i[t]);return t}for(;M&&(c.length||f)&&!(_>=v);){if(f)if(P&&l.length-_>v){var T=0,N=void 0;do{if((T+=1)>1e3)break;N=j(u)||S.pick(l)}while("undefined"!=typeof i[N]);"undefined"==typeof i[N]&&(i[N]=o[N],_+=1)}else if(c.length&&!m){var L=S.pick(c),$=S.randexp(L);i[$]||(i[$]=s[L],_+=1)}else{var H=j(u)||V(1)+(R=void 0,S.randexp("_?[_a-f\\d]{1,3}"+(R?"\\$?":"")));i[H]||(i[H]=m||J,_+=1)}for(var q=0;_<v&&q<c.length;q+=1){var D=c[q],F=S.randexp(D);i[F]||(i[F]=s[D],_+=1)}}if(0===u.length&&(!f||!1===d))for(var G=S.number(v,x);_<G;){var z=j(l);z&&(i[z]=o[z]),_+=1}return n(i,t.concat(["properties"]),r,e)},string:function(e){return C.typecast("string",e,(function(t){return e.format?te(e,(function(){return W(t.minLength,t.maxLength)})):e.pattern?S.randexp(e.pattern):W(t.minLength,t.maxLength)}))}};function ne(e,t,r,n){if(e=r(e,null,t)){if("properties"!==t[t.length-1]){if(a("useExamplesValue")&&Array.isArray(e.examples)){var i=e.examples.concat("default"in e?[e["default"]]:[]);return C.typecast(null,e,(function(){return S.pick(i)}))}if(a("useDefaultValue")&&"default"in e&&(""!==e["default"]||!a("replaceEmptyByRandomValue")))return e["default"];if("template"in e)return C.template(e.template,n)}if(e.not&&"object"==typeof e.not&&(e=C.notValue(e.not,C.omitProps(e,["not"]))).type&&"object"===e.type)return ne(e,t.concat(["not"]),r,n);if("const"in e)return e["const"];if(Array.isArray(e["enum"]))return C.typecast(null,e,(function(){return S.pick(e["enum"])}));if("function"==typeof e.thunk)return ne(e.thunk(n),t,r);if("function"==typeof e.generate)return C.typecast(null,e,(function(){return e.generate(n)}));if(e.jsonPath)return e;var o=e.type;if(Array.isArray(o)?o=S.pick(o):void 0===o&&(o=function(e,t){for(var r=Object.keys(D),n=0;n<r.length;n+=1){var i=r[n];if(G(e,t[t.length-1],D[i]))return i}}(e,t)||o)&&(e.type=o),"string"==typeof o){if(!re[o]){if(a("failOnInvalidTypes"))throw new q("unknown primitive "+C.short(o),t.concat(["type"]));return a("defaultInvalidTypeProduct")}try{return re[o](e,t,r,ne)}catch(u){if("undefined"==typeof u.path)throw new q(u.stack,t);throw u}}var s={};return Array.isArray(e)&&(s=[]),Object.keys(e).forEach((function(n){"object"==typeof e[n]&&"definitions"!==n?s[n]=ne(e[n],t.concat([n]),r,s):s[n]=e[n]})),s}}function ie(e){return"[object Object]"==={}.toString.call(e)&&!Object.keys(e).length}function ae(e,t){return e&&"object"==typeof e?Array.isArray(e)?e.map((function(e){return ae(e,!0)})).filter((function(e){return void 0!==e})):(Object.keys(e).forEach((function(t){if(ie(e[t]))delete e[t];else{var r=ae(e[t]);ie(r)||(e[t]=r)}})),!Object.keys(e).length&&t?undefined:e):e}function oe(e,r,n,i){if(!e||"object"!=typeof e)return e;if(n||(n={}),r||(r=e),Array.isArray(e))return e.map((function(e){return oe(e,r,n,i)}));if(e.jsonPath){var a="object"!=typeof e.jsonPath?{path:e.jsonPath}:e.jsonPath;a.group=e.group||a.group||i,a.cycle=e.cycle||a.cycle||!1,a.reverse=e.reverse||a.reverse||!1,a.count=e.count||a.count||1;var o=a.group+"__"+a.path;return n[o]||(a.count>1?n[o]=t.JSONPath(a.path,r).slice(0,a.count):n[o]=t.JSONPath(a.path,r)),a.cycle||a.reverse?function(e,t){if(!Array.isArray(e))return e;var r=t?e.pop():e.shift();return t?e.unshift(r):e.push(r),r}(n[o],a.reverse):function(e){return Array.isArray(e)?S.pick(e):e}(n[o])}return Object.keys(e).forEach((function(t){e[t]=oe(e[t],r,n,t)})),e}function se(e,t,r){var n,i=0,o=a("refDepthMin")||0,s=a("refDepthMax")||3;try{var u=ne(C.clone(t),[],(function f(u,l,c){if(null===u||u===undefined)return null;if("function"==typeof u.generate)return u;if("string"==typeof(u.$id||u.id)&&(delete u.id,delete u.$id,delete u.$schema),"string"==typeof u.$ref){var h,p=S.number(Math.min(o,s),Math.max(o,s))-1;if("#"===u.$ref||n===u.$ref&&++i>p)return delete u.$ref,u;if(n=u.$ref,-1===u.$ref.indexOf("#/")&&(h=e[u.$ref]||null),0===u.$ref.indexOf("#/definitions/")&&(h=t.definitions[u.$ref.split("#/definitions/")[1]]||null),void 0!==h){if(!h&&!0!==a("ignoreMissingRefs"))throw new Error("Reference not found: "+u.$ref);C.merge(u,h||{})}return delete u.$ref,u}if(Array.isArray(u.allOf)){var m=u.allOf;delete u.allOf,m.forEach((function(e){var t=f(e,null,c);C.merge(u,"function"==typeof t.thunk?t.thunk(u):t)}))}if(Array.isArray(u.oneOf||u.anyOf)){var d=u.oneOf||u.anyOf;return u["enum"]&&u.oneOf&&(u["enum"]=u["enum"].filter((function(e){return C.validate(e,d)}))),{thunk:function(e){var t=C.omitProps(u,["anyOf","oneOf"]),r=S.pick(d);return C.merge(t,r),d.forEach((function(n){n.required&&n!==r&&n.required.forEach((function(r){t.properties&&t.required&&!t.required.includes(r)&&delete t.properties[r],e&&e.properties&&delete e.properties[r]}))})),t}}}if(Object.keys(u).forEach((function(e){!Array.isArray(u[e])&&"object"!=typeof u[e]||C.isKey(e)||(u[e]=f(u[e],e,c.concat(e)))})),c){var g=c[c.length-1];if("properties"===g||"items"===g)return u}return r.wrap(u)}));return a("resolveJsonPath")?oe(ae(u)):ae(u)}catch(f){throw f.path?new Error(f.message+" in /"+f.path.join("/")):f}}var ue=new L;function fe(){ue.define("pattern",S.randexp),ue.define("autoIncrement",(function(e,t){if(!this.offset){var r=t.minimum||1,n=r+s.MAX_NUMBER,i=e.initialOffset||t.initialOffset;this.offset=i||S.number(r,n)}return!0===e?this.offset++:t})),ue.define("sequentialDate",(function(e,t){if(this.now||(this.now=S.date()),e){if(t=this.now.toISOString(),-1===["seconds","minutes","hours","days","weeks","months","years"].indexOf(e=!0===e?"days":e))throw new Error("Unsupported increment by "+C.short(e));this.now.setTime(this.now.getTime()+S.date(e))}return t}))}function le(e){var t={};return Array.isArray(e)?e.forEach((function(e){t[e.$id||e.id]=e})):t=e||{},t}var ce=function(e,t,r){return ce.generate(e,t)};return ce.generate=function(e,t){return se(le(t),e,ue)},ce.resolve=function(t,r,n){"string"==typeof r&&(n=r,r={}),n=(n=n||("undefined"!=typeof process?process.cwd():"")).replace(/\/+$/,"")+"/";var i=le(r),a={order:300,canRead:!0,read:function(e,t){try{t(null,i[e.url]||i[e.url.split("/").pop()])}catch(r){t(r)}}};return e.dereference(n,t,{resolve:{file:{order:100},http:{order:200},fixedRefs:a},dereference:{circular:"ignore"}}).then((function(e){return se(i,e,ue)}))},fe(),ce.format=H,ce.option=a,ce.random=S,ce.extend=function(e,t){return ue.extend(e,t),ce},ce.define=function(e,t){return ue.define(e,t),ce},ce.reset=function(e){return ue.reset(e),fe(),ce},ce.locate=function(e){return ue.get(e)},"undefined"!=typeof VERSION&&(ce.version=VERSION),ce}));